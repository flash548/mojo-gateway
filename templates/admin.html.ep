<html>
    <head>
        <link rel="stylesheet" href="/css/astro.css" />
        <link rel="stylesheet" href="/css/tachyons.min.css" />
    </head>
    <body class="dark-theme">
        <div class="w-100 flex justify-center flex-column">
            <div class="w-100 flex justify-end">
                <button type="button" class="rux-button  ma2">Add User</button>
            </div>
            <div>
                
                <div class="rux-progress overflow-hidden">
                  <progress />
                </div>
            </div>
        </div>
        <script type="module">
          import { h, Component, render } from '/js/preact.js';
          import htm from '/js/htm.js';
        
          // Initialize htm with Preact
          const html = htm.bind(h);
        
          class App extends Component {
            constructor(props) {
              super(props);
              this.state = { show: false };
            }

            render() {
              return html`
                <div class="relative flex flex-column w-100 pa2">
                  <${TabPanel} title="Admin" tabs=${[ 
                    { title: "Users" },
                    { title: "Routes"},
                    { title: "Stats" } ]} 
                  />
                  <div class="flex w-100 justify-end">
                    <button onClick=${() => this.setState({ show: true, action: 'Add User' })} class="rux-button ma2" type="button">Add User</button>
                  </div>
                  ${ this.state.show && 
                    html`<${EditPanel} 
                      title=${this.state.action}
                      backgroundClicked=${() => this.setState({ show: false })} />` }
                  <${UserTable}/>
                </div>
            `;
          }
        }

        %= include 'admin/UserTable', format => 'js'
        %= include 'admin/TabPanel', format => 'js'
        %= include 'admin/EditPanel', format => 'js'
      
        render(html`<${App} />`, document.body);
        </script>
    </body>
</html>
